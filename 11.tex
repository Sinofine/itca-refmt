One of the basic notions in algebraic geometry is that of the dimension of a variety. This is essentially a local notion, and, as we shall show in this chapter, there is a very satisfactory theory of dimension for general Noetherian local rings. The main theorem asserts the equivalence of three different definitions of dimension. Two of these definitions have a fairly obvious geometrical content, but the third involving the Hilbert function is less conceptual. It has, however, many technical advantages and the whole theory becomes more streamlined if one brings it in at an early stage.

After dealing with dimension we give a brief account of regular local rings, which correspond to the notion of non-singularity in algebraic geometry. We establish the equivalence of three definitions of regularity.

Finally we indicate how, in the case of algebraic varieties over a field, the local dimensions we have defined coincide with the transcendence degree of the function field.

\section{Hilbert Functions}\index{Hilbert function}\textit{Hilbert function}
Let $A=\oplus_{n=0}^{\infty} A_{n}$ be a Noetherian graded ring. By \eqref{prop:10.7} $A_{0}$ is a Noetherian ring, and $A$ is generated (as an $A_{0}$-algebra) by say $x_{1}, \ldots, x_{s}$, which we may take to be homogeneous, of degrees $k_{1}, \ldots, k_{s}($ all $>0$ ).

Let $M$ be a finitely-generated graded $A$-module. Then $M$ is generated by a finite number of homogeneous elements, say $m_{j}(1 \leqslant j \leqslant t)$; let $r_{j}=\operatorname{deg} m_{j}$. Every element of $M_{n}$, the homogeneous component of $M$ of degree $n$, is thus of the form $\sum_{j} f_{j}(x) m_{j}$, where $f_{j}(x) \in A$ is homogeneous of degree $n-r_{j}$ (and therefore zero if $n<r_{j}$ ). It follows that $M_{n}$ is finitely generated as an $A_{0^{-}}$ module, namely it is generated by all $g_{j}(x) m_{j}$ where $g_{j}(x)$ is a monomial in the $x_{i}$ of total degree $n-r_{j}$.

Let $\lambda$ be an additive function (with values in $\mathrm{Z}$ ) on the class of all finitelygenerated $A_{0}$-modules (Chapter 2). The \index{Poincare series}\textit{Poincaré series} of $M$ (with respect to $\lambda$ ) is the generating function of $\lambda\left(M_{n}\right)$, i.e., it is the power series

\[
P(M, t)=\sum_{n=0}^{\infty} \lambda\left(M_{n}\right) t^{n} \quad \in \mathbf{Z}[[t]]
\]

\begin{theorem}\label{thm:11.1}
(Hilbert, Serre). $P(M, t)$ is a rational function in $t$ of the form $f(t) / \prod_{i=1}^{s}\left(1-t^{k_{i}}\right)$, where $f(t) \in \mathbf{Z}[t]$.
\end{theorem}

\begin{proof}
By induction on $s$, the number of generators of $A$ over $A_{0}$. Start with $s=0$; this means that $A_{n}=0$ for all $n>0$, so that $A=A_{0}$ and $M$ is a finitelygenerated $A_{0}$ module, hence $M_{n}=0$ for all large $n$. Thus $P(M, t)$ is a polynomial in this case.

Now suppose $s>0$ and the theorem true for $s-1$. Multiplication by $x_{2}$ is an $A$-module homomorphism of $M_{n}$ into $M_{n+k_{s}}$, hence it gives an exact sequence, say

\[
0 \rightarrow K_{n} \rightarrow M_{n} \stackrel{x_{s}}{\longrightarrow} M_{n+k_{s}} \rightarrow L_{n+k_{s}} \rightarrow 0 .
\]

Let $K=\oplus_{n} K_{n}, L=\oplus_{n} L_{n}$; these are both finitely-generated $A$-modules (because $K$ is a submodule and $L$ a quotient module of $M$ ), and both are annihilated by $x_{s}$, hence they are $A_{0}\left[x_{1}, \ldots, x_{s-1}\right]$-modules. Applying $\lambda$ to (1) we have, by \eqref{prop:2.11}

\[
\lambda\left(K_{n}\right)-\lambda\left(M_{n}\right)+\lambda\left(M_{n+k_{s}}\right)-\lambda\left(L_{n+k_{s}}\right)=0 ;
\]

multiplying by $t^{n+k_{s}}$ and summing with respect to $n$ we get

\[
\left(1-t^{k_{s}}\right) P(M, t)=P(L, t)-t^{k_{s}} P(K, t)+g(t)
\]

where $g(t)$ is a polynomial. Applying the inductive hypothesis the result now follows.
\end{proof}

The order of the pole of $P(M, t)$ at $t=1$ we shall denote by $d(M)$. It provides a measure of the "size" of $M$ (relative to $\lambda$ ). In particular $d(A)$ is defined. The case when all $k_{i}=1$ is specially simple:

\begin{corollary}\label{cor:11.2}
If each $k_{i}=1$, then for all sufficiently large $n, \lambda\left(M_{n}\right)$ is a polynomial in $n$ (with rational coefficients) of degree $e^{*} d-1$.
\end{corollary}

\begin{proof}
By \eqref{thm:11.1} we have $\lambda\left(M_{n}\right)=$ coefficient of $t^{n}$ in $f(t) \cdot(1-t)^{-s}$. Canceling powers of $(1-t)$ we may assume $s=d$ and $f(1) \neq 0$. Suppose $f(t)=$ $\sum_{k=0}^{N} a_{k} t^{k} ;$ since

we have

\[
(1-t)^{-d}=\sum_{k=0}^{\infty}\left(\begin{array}{c}
d+k-1 \\
d-1
\end{array}\right) t^{k}
\]

\[
\lambda\left(M_{n}\right)=\sum_{k=0}^{N} a_{k}\left(\begin{array}{c}
d+n-k-1 \\
d-1
\end{array}\right) \text { for all } n \geqslant N .
\]

and the sum on the right-hand side is a polynomial in $n$ with leading term $\left(\sum a_{k}\right) n^{d-1} /(d-1) ! \neq 0$.
\end{proof}

\begin{remark}
\begin{enumerate}[1.]
\item For a polynomial $f(x)$ to be such that $f(n)$ is an integer for all integers $n$, it is not necessary for $f$ to have integer coefficients: e.g., $\frac{1}{2} x(x+1)$.

\item We adopt the convention here that the degree of the zero polynomial is -1 : also that the binomial coefficient $\left(\begin{array}{c}n \\ -1\end{array}\right)=0$ for $n \geq 0$, and $=1$ for $n=-1$. The polynomial in \eqref{cor:11.2} is usually called the Hilbert function (or polynomial) of $M$ (with respect to $\lambda$ ).
\end{enumerate}
\end{remark}

Returning now to the sequence (1) let us replace $x$, by any element $x \in A_{k}$ which is not a zero-divisor in $M$ (i.e., $x m=0$ with $m \in M \Rightarrow m=0$ ). Then $K=0$ and equation (2) shows that

\[
d(L)=d(M)-1 \text {. }
\]

Thus we have proved

\begin{proposition}\label{prop:11.3}
If $x \in A_{k}$ is not a zero-divisor in $M$ then $d(M / x M)=$ $d(M)-1$.
\end{proposition}

We shall use \eqref{thm:11.1} in the case where $A_{0}$ is an Artin ring (in particular, a field) and $\lambda(M)$ is the length $l(M)$ of a finitely-generated $A_{0}$-module $M$. By \eqref{prop:6.9} $l(M)$ is additive.

\begin{example}
Let $A=A_{0}\left[x_{1}, \ldots, x_{3}\right]$, where $A_{0}$ is an Artin ring and the $x_{i}$ are independent indeterminates. Then $A_{n}$ is a free $A_{0}$-module generated by the monomials $x_{1}^{m_{1}} \cdots x_{s}^{m_{s}}$ where $\sum m_{i}=n$; there are $\left(\begin{array}{c}s+n-1 \\ s-1\end{array}\right)$ of these, hence $P(A, t)=(1-t)^{-s}$.
\end{example}

We shall now consider the Hilbert functions obtained from a local ring by passing to the associated graded rings as in Chapter 10.

\begin{proposition}\label{prop:11.4}
Let $A$ be a Noetherian local ring, $\mathfrak{m}$ its maximal ideal, $\mathfrak{q}$ an m-primary ideal, $M$ a finitely-generated A-module, $\left(M_{n}\right)$ a stable $\mathfrak{q}-$ filtration of $M$. Then
\begin{enumerate}[i)]
\item $M / M_{n}$ is of finite length, for each $n \geqslant 0$;
\item for all sufficiently large $n$ this length is a polynomial $g(n)$ of degree $\leqslant s$ in $n$, where $s$ is the least number of generators of $q$;
\item the degree and leading coefficient of $g(n)$ depend only on $M$ and $\mathfrak{q}$, not on the filtration chosen.
\end{enumerate}
\end{proposition}

\begin{proof}
\begin{enumerate}[i)]
\item Let $G(A)=\bigoplus_{n} \mathfrak{q}^{n} / \mathfrak{q}^{n+1}, G(M)=\bigoplus_{n} M_{n} / M_{n+1} . G_{0}(A)=A / \mathfrak{q}$ is an Artin local ring, say by \eqref{thm:8.5}; $G(A)$ is Noetherian, and $G(M)$ is a finitelygenerated graded $G(A)$-module \eqref{prop:10.22}. Each $G_{n}(M)=M_{n} / M_{n+1}$ is a Noetherian $A$-module annihilated by $\mathfrak{q}$, hence a Noetherian $A / \mathfrak{q}$-module, and therefore of finite length (since $A / \mathfrak{q}$ is Artin). Hence $M / M_{n}$ is of finite length, and

\[
l_{n}=l\left(M / M_{n}\right)=\sum_{r=1}^{n} l\left(M_{r-1} / M_{r}\right)
\]

\item If $x_{1}, \ldots, x_{3}$ generate $q$, the images $\bar{x}_{i}$ of the $x_{i}$ in $q / q^{2}$ generate $G(A)$ as an $A / q$-algebra, and each $\bar{x}_{i}$ has degree 1 . Hence by \eqref{cor:11.2} we have $l\left(M_{n} / M_{n+1}\right)$ $=f(n)$ say, where $f(n)$ is a polynomial in $n$ of degree $\leqslant s-1$ for all large $n$. Since from (1) we have $l_{n+1}-l_{n}=f(n)$, it follows that $l_{n}$ is a polynomial $g(n)$ of degree $\leqslant s$, for all large $n$.

\item Let $\left(\tilde{M}_{n}\right)$ be another stable $q$-filtration of $M$, and let $\bar{g}(n)=l\left(M / \tilde{M}_{n}\right)$. By \eqref{lem:10.6} the two filtrations have bounded difference, i.e., there exists an integer $n_{0}$ such that $M_{n+n_{0}} \subseteq \tilde{M}_{n}, \tilde{M}_{n+n_{0}} \subseteq M_{n}$ for all $n \geqslant 0$; consequently we have $g\left(n+n_{0}\right) \geqslant \bar{g}(n), \tilde{g}\left(n+n_{0}\right) \geqslant g(n)$. Since $g$ and $\tilde{g}$ are polynomials for all large $n$, we have $\lim _{n \rightarrow \infty} g(n) / \tilde{g}(n)=1$, and therefore $g, \tilde{g}$ have the same degree and leading coefficient.
\end{enumerate}
\end{proof}

The polynomial $g(n)$ corresponding to the filtration $\left(q^{n} M\right)$ is denoted by $\chi_{q}^{M}(n)$ :

\[
\chi_{q}^{M}(n)=l\left(M / q^{n} M\right) \quad (\text { for all large } n) .
\]

If $M=A$, we write $\chi_{q}(n)$ for $\chi_{q}^{A}(n)$ and call it the characteristic polynomial of the m-primary ideal $q$. In this case \eqref{prop:11.4} gives

\begin{corollary}\label{cor:11.5}
For all large $n$, the length $l\left(A / q^{n}\right)$ is a polynomial $\chi_{q}(n)$ of degree $\leqslant s$, where $s$ is the least number of generators of $q$.
\end{corollary}

The polynomials $\chi_{q}(n)$ for different choices of the m-primary ideal $q$ all have the same degree, as the next proposition shows:

\begin{proposition}\label{prop:11.6}
If $A, \mathfrak{m}, q$ are as above

\[
\operatorname{deg} \chi_{\mathfrak{q}}(n)=\operatorname{deg} \chi_{\mathfrak{m}}(n) \text {. }
\]
\end{proposition}

\begin{proof}
We have $\mathfrak{m} \supseteq \mathfrak{q} \supseteq \mathfrak{m}^{r}$ for some $r$ by \eqref{cor:7.16}, hence $\mathfrak{m}^{n} \supseteq \mathfrak{q}^{n} \supseteq \mathfrak{m}^{\mathfrak{m}}$ and therefore

\[
\chi_{\mathfrak{m}}(n) \leqslant \chi_{\mathfrak{a}}(n) \leqslant \chi_{\mathfrak{m}}(r n) \text { for all large } n .
\]

Now let $n \rightarrow \infty$, remembering that the $\chi$ s are polynomials in $n$.
\end{proof}

The common degree of the $\chi_{\mathfrak{q}}(n)$ will be denoted by $d(A)$ : in view of \eqref{cor:11.2} this means we are putting $d(A)=d\left(G_{\mathfrak{m}}(A)\right)$ where $d\left(G_{\mathfrak{m}}(A)\right)$ is the integer defined earlier as the pole at $t=1$ of the Hilbert function of $G_{\mathfrak{m}}(A)$.

\section{Dimension Theory of Noetherian Local Rings}\index{Dimension}\textit{Dimension}
Let $A$ be a Noetherian local ring, in its maximal ideal.

Let $\delta(A)=$ least number of generators of an m-primary ideal of $\boldsymbol{A}$. Our ambition is to prove that $\delta(A)=d(A)=\operatorname{dim} A$. We shall achieve this by proving $\delta(A) \geqslant d(A) \geqslant \operatorname{dim} A \geqslant \delta(A)$. \eqref{cor:11.5} and \eqref{prop:11.6} together provide the first link in this chain:

\begin{proposition}\label{prop:11.7}
$\delta(A) \geqslant d(A)$.
\end{proposition}

Next we shall prove the analogue for local rings of \eqref{prop:11.3}. Note that this proof uses the strong version of the Artin-Rees lemma (not just the topological part).

\begin{proposition}\label{prop:11.8}
Let $A, \mathfrak{m}, q$ be as before. Let $M$ be a finitely-generated $A$-module, $x \in A$ a non-zero-divisor in $M$ and $M^{\prime}=M / x M$. Then

\[
\operatorname{deg} \chi_{a}^{M^{*}} \leqslant \operatorname{deg} \chi_{a}^{M}-1 .
\]
\end{proposition}

\begin{proof}
Let $N=x M$; then $N \cong M$ as $A$-modules, by virtue of the assumption on $x$. Let $N_{n}=N \cap q^{n} M$. Then we have exact sequences

\[
0 \rightarrow N / N_{n} \rightarrow M / q^{n} M \rightarrow M^{\prime} / q^{n} M^{\prime} \rightarrow 0 .
\]

Hence, if $g(n)=l\left(N / N_{n}\right)$, we have

\[
g(n)-\chi_{q}^{M}(n)+\chi_{q}^{M^{\prime}}(n)=0
\]

for all large $n$. Now by Artin-Rees \eqref{prop:10.9}, $\left(N_{n}\right)$ is a stable $q$-filtration of $N$. Since $N \cong M$, \eqref{prop:11.4} iii then implies that $g(n)$ and $\chi_{q}^{M}(n)$ have the same leading term; hence the result.
\end{proof}

\begin{corollary}\label{cor:11.9}
If $A$ is a Noetherian local ring, $x$ a non-zero-divisor in $A$, then $d(A /(x)) \leqslant d(A)-1$.
\end{corollary}

\begin{proof}
Put $M=A$ in \eqref{prop:11.8}.
\end{proof}

We can now prove the crucial result:

\begin{proposition}\label{prop:11.10}
$d(A) \geqslant \operatorname{dim} A$.
\end{proposition}

\begin{proof}
By induction on $d=d(A)$. If $d=0$ then $l\left(A / \mathfrak{m}^{n}\right)$ is constant for all large $n$, hence $\mathfrak{m}^{n}=\mathfrak{m}^{n+1}$ for some $n$, hence $\mathfrak{m}^{n}=0$ by Nakayama's lemma \eqref{prop:2.6}. Thus $A$ is an Artin ring and $\operatorname{dim} A=0$.

Suppose $d>0$ and let $\mathfrak{p}_{0} \subset \mathfrak{p}_{1} \subset \ldots \subset \mathfrak{p}_{r}$ be any chain of prime ideals in $A$. Let $x \in \mathfrak{p}_{1}, x \notin \mathfrak{p}_{0}$; let $A^{\prime}=A / \mathfrak{p}_{0}$, and let $x^{\prime}$ be the image of $x$ in $A^{\prime}$. Then $x^{\prime} \neq 0$, and $A^{\prime}$ is an integral domain, hence by \eqref{cor:11.9} we have

\[
d\left(A^{\prime} /\left(x^{\prime}\right)\right) \leqslant d\left(A^{\prime}\right)-1 .
\]

Also, if $\mathfrak{m}^{\prime}$ is the maximal ideal of $A^{\prime}, A^{\prime} / \mathfrak{m}^{\prime n}$ is a homomorphic image of $A / \mathfrak{m}^{n}$, hence $l\left(A / \mathfrak{m}^{n}\right) \geqslant l\left(A^{\prime} / \mathfrak{m}^{\prime n}\right)$ and therefore $d(A) \geqslant d\left(A^{\prime}\right)$. Consequently

\[
d\left(A^{\prime} /\left(x^{\prime}\right)\right) \leqslant d(A)-1=d-1 .
\]

Hence, by the inductive hypothesis, the length of any chain of prime ideals in $A^{\prime} /\left(x^{\prime}\right)$ is $\leqslant d-1$. But the images of $\mathfrak{p}_{1}, \ldots, \mathfrak{p}_{r}$ in $A^{\prime} /\left(x^{\prime}\right)$ form a chain of length $r-1$, hence $r-1 \leqslant d-1$ and consequently $r \leqslant d$. Hence $\operatorname{dim} A \leqslant d$.
\end{proof}

\begin{corollary}\label{cor:11.11}
If $A$ is a Noetherian local ring, $\operatorname{dim} A$ is finite.
\end{corollary}

If $A$ is any ring, $\mathfrak{p}$ a prime ideal in $A$, then the \textit{height}\index{Height} of $\mathfrak{p}$ is defined to be the supremum of chains of prime ideals $\mathfrak{p}_{0} \subset \mathfrak{p}_{1} \subset \cdots \subset \mathfrak{p}_{r}=\mathfrak{p}$ which end at $\mathfrak{p}$ : by \eqref{cor:3.13}, height $\mathfrak{p}=\operatorname{dim} A_{\mathfrak{p}}$. Hence, from \eqref{cor:11.11}:

\begin{corollary}\label{cor:11.12}
In a Noetherian ring every prime ideal has finite height, and therefore the set of prime ideals in a Noetherian ring satisfies the descending chain condition.
\end{corollary}

\begin{remark}
Likewise we may define the depth of $\mathfrak{p}$, by considering chains of prime ideals which start at $\mathfrak{p}$ : clearly depth $\mathfrak{p}=\operatorname{dim} A / \mathfrak{p}$. But the depth of a prime ideal, even in a Noetherian ring, may be infinite (unless the ring is local). See Exercise 4.
\end{remark}

\begin{proposition}\label{prop:11.13}
Let $A$ be a Noetherian local ring of dimension $d$. Then there exists an $\mathfrak{m}$-primary ideal in $A$ generated by $d$ elements $x_{1}, \ldots, x_{d}$, and therefore $\operatorname{dim} A \geqslant \delta(A)$.
\end{proposition}

\begin{proof}
Construct $x_{1}, \ldots, x_{d}$ inductively in such a way that every prime ideal containing $\left(x_{1}, \ldots, x_{i}\right)$ has height $\geqslant i$, for each $i$. Suppose $i>0$ and $x_{1}, \ldots, x_{i-1}$ constructed. Let $\mathfrak{p}_{j}(1 \leqslant j \leqslant s)$ be the minimal prime ideals (if any) of $\left(x_{1}, \ldots, x_{i-1}\right)$ which have height exactly $i-1$. Since $i-1<d=\operatorname{dim} A=$ height $\mathfrak{m}$, we have $\mathfrak{m} \neq \mathfrak{p}_{j}(1 \leqslant j \leqslant s)$, hence $\mathfrak{m} \neq \bigcup_{\mathfrak{j}=1}^{\mathfrak{s}} \mathfrak{p}_{j}$, by \eqref{prop:1.11}. Choose $x_{i} \in \mathfrak{m}, x_{i} \notin \cup \mathfrak{p}_{j}$, and let $q$ be any prime containing $\left(x_{1}, \ldots, x_{i}\right)$. Then $q$ contains some minimal prime ideal $\mathfrak{p}$ of $\left(x_{1}, \ldots, x_{i-1}\right)$. If $\mathfrak{p}=\mathfrak{p}$, for some $j$, we have $x_{\mathfrak{i}} \in \mathfrak{q}, x_{\mathfrak{i}} \notin \mathfrak{p}$, hence $\mathfrak{q} \supset \mathfrak{p}$ and therefore height $q \geqslant i$; if $\mathfrak{p} \neq \mathfrak{p}$, $(1 \leqslant j \leqslant s)$, then height $\mathfrak{p} \geqslant i$, hence height $q \geqslant i$. Thus every prime ideal containing $\left(x_{1}, \ldots, x_{i}\right)$ has height $\geqslant i$.

Consider then $\left(x_{1}, \ldots, x_{d}\right)$. If $\mathfrak{p}$ is a prime ideal of this ideal, $\mathfrak{p}$ has height $\geqslant d$, hence $\mathfrak{p}=\mathfrak{m}$ (for $\mathfrak{p} \subset \mathfrak{m} \Rightarrow$ height $\mathfrak{p}<$ height $\mathfrak{m}=d$ ). Hence the ideal $\left(x_{1}, \ldots, x_{d}\right)$ is m-primary.
\end{proof}

\begin{theorem}\label{thm:11.14}
(Dimension theorem.) For any Noetherian local ring $A$ the following three integers are equal:
\begin{enumerate}[i)]
\item the maximum length of chains of prime ideals in $A$;
\item the degree of the characteristic polynomial $\chi_{\mathfrak{m}}(n)=l\left(A / \mathfrak{m}^{n}\right)$;
\item the least number of generators of an $\mathfrak{m}$-primary ideal of $A$.
\end{enumerate}
\end{theorem}

\begin{proof}
\eqref{prop:11.7}, \eqref{prop:11.10}, \eqref{prop:11.13}.
\end{proof}

\begin{example}
Let $A$ be the polynomial ring $k\left[x_{1}, \ldots, x_{n}\right]$ localized at the maximal ideal $\mathfrak{m}=\left(x_{1}, \ldots, x_{n}\right)$. Then $G_{\mathfrak{m}}(A)$ is a polynomial ring in $n$ indeterminates and so its Poincaré series is $(1-t)^{-n}$. Hence, using the equivalence of (i) and (ii) in \eqref{thm:11.14}, we deduce that $\operatorname{dim} A_{\mathfrak{m}}=n$.
\end{example}

\begin{corollary}\label{cor:11.15}
$\operatorname{dim} A \leqslant \operatorname{dim}_{k}\left(\mathfrak{m} / \mathfrak{m}^{2}\right)$.
\end{corollary}

\begin{proof}
If $x_{i} \in \mathfrak{m}(1 \leqslant i \leqslant s)$ are such that their images in $\mathfrak{m} / \mathfrak{m}^{2}$ form a basis of this vector space, then the $x_{i}$ generate $m$ by $\eqref{prop:2.8}$; hence $\operatorname{dim}_{k}\left(\mathfrak{m} / \mathfrak{m}^{2}\right)=$ $s \geqslant \operatorname{dim} A$ by \eqref{prop:11.13}.
\end{proof}

\begin{corollary}\label{cor:11.16}
Let $A$ be a Noetherian ring, $x_{1}, \ldots, x_{r} \in A$. Then every minimal ideal $\mathfrak{p}$ belonging to $\left(x_{1}, \ldots, x_{r}\right)$ has height $\leqslant r$.
\end{corollary}

\begin{proof}
In $A_{\downarrow}$ the ideal $\left(x_{1}, \ldots, x_{\uparrow}\right)$ becomes $p^{\natural}$-primary, hence $r \geqslant \operatorname{dim} A_{\downarrow}=$ height $\mathfrak{p}$.
\end{proof}

\begin{corollary}\label{cor:11.17}
(Krull's principal ideal theorem). Let $A$ be a Noetherian ring and let $x$ be an element of $A$ which is neither a zero-divisor nor a unit. Then every minimal prime ideal $p$ of $(x)$ has height 1 .
\end{corollary}

\begin{proof}
By \eqref{cor:11.16}, height $\mathfrak{p} \leqslant 1$. If height $\mathfrak{p}=0$, then $\mathfrak{p}$ is a prime ideal belonging to 0 , hence every element of $p$ is a zero-divisor by \eqref{prop:4.7}: contradiction, since $x \in p$.
\end{proof}

\begin{corollary}\label{cor:11.18}
Let $A$ be a Noetherian local ring, $x$ an element of $m$ which is not a zero-divisor. Then $\operatorname{dim} A /(x)=\operatorname{dim} A-1$.
\end{corollary}

\begin{proof}
Let $d=\operatorname{dim} A /(x)$. By \eqref{cor:11.9} and \eqref{thm:11.14} we have $d \leqslant \operatorname{dim} A-1$. On the other hand, let $x_{i}(1 \leqslant i \leqslant d)$ be elements of $m$ whose images in $A /(x)$ generate an $\mathfrak{m} /(x)$-primary ideal. Then the ideal $\left(x, x_{1}, \ldots, x_{d}\right)$ in $A$ is $\mathfrak{m}$-primary, hence $d+1 \geqslant \operatorname{dim} A$.
\end{proof}

\begin{corollary}\label{cor:11.19}
Let $\hat{A}$ be the m-adic completion of $A$. Then $\operatorname{dim} A=$ $\operatorname{dim} \hat{A}$.
\end{corollary}

\begin{proof}
$A / \mathfrak{m}^{n} \cong A / \hat{\mathfrak{m}}^{n}$ from \eqref{prop:10.15}, hence $\chi_{\mathfrak{m}}(n)=\chi_{\hat{\mathfrak{m}}}(n)$.
\end{proof}

If $x_{1}, \ldots, x_{d}$ generate an m-primary ideal, and $d=\operatorname{dim} A$, we call $x_{1}, \ldots, x_{d}$ a \index{Parameters}\textit{system of parameters}\index{Parameters!system of}. They have a certain independence property described in the following proposition.

\begin{proposition}\label{prop:11.20}
Let $x_{1}, \ldots, x_{d}$ be a system of parameters for $A$ and let $\mathfrak{q}=\left(x_{1}, \ldots, x_{d}\right)$ be the $\mathfrak{m}$-primary ideal generated by them. Let $f\left(t_{1}, \ldots, t_{d}\right)$ be a homogeneous polynomial of degree $s$ with coefficients in $A$, and assume that

\[
f\left(x_{1}, \ldots, x_{d}\right) \in q^{s+1} .
\]

Then all the coefficients of $f$ lie in $m$.
\end{proposition}

\begin{proof}
Consider the epimorphism of graded rings

\[
\alpha:(A / \mathfrak{q})\left[t_{1}, \ldots, t_{d}\right] \rightarrow G_{\mathfrak{q}}(A)
\]

given by $t_{t} \rightarrow \bar{x}_{t}$, where $t_{t}$ are indeterminates and $\bar{x}_{t}$ is $x_{t} \bmod \mathfrak{q}$. The hypothesis on $f$ implies that $f\left(t_{1}, \ldots, t_{d}\right)$ (the reduction of $f \bmod q$ ) is in the kernel of $\alpha$. Assume if possible that some coefficient of $f$ is a unit, then $f$ is not a zero-divisor (cf. Chapter 1, Exercise 3). Then we have

\[
\begin{aligned}
d\left(G_{\mathrm{q}}(A)\right) & \leqslant d\left((A / \mathfrak{q})\left[t_{1}, \ldots, t_{d}\right] /(f)\right) \text { because } f \in \operatorname{Ker}(\alpha) \\
& =d\left((A / \mathfrak{q})\left[t_{1}, \ldots, t_{d}\right]\right)-1 \text { by }\eqref{prop:11.3} \\
& =d-1 \text { by the example following \eqref{prop:11.3}. }
\end{aligned}
\]

But $d\left(G_{q}(A)\right)=d$ by the main theorem \eqref{thm:11.14}. This gives the required contradiction. This proposition takes a simple form if $A$ contains a field $k$ mapping isomorphically onto the residue field $A / \mathfrak{m}$ :
\end{proof}

\begin{corollary}\label{cor:11.21}
If $k \subset A$ is a field mapping isomorphically onto $A / \mathfrak{m}$ and if $x_{1}, \ldots, x_{d}$ is a system of parameters, then $x_{1}, \ldots, x_{d}$ are algebraically independent over $k$.
\end{corollary}

\begin{proof}
Assume $f\left(x_{1}, \ldots, x_{d}\right)=0$ where $f$ is a polynomial with coefficients in $k$. If $f \neq 0$ we can write $f=f_{s}+$ higher terms, where $f_{s}$ is homogeneous of degree $s$ and $f_{s} \not \equiv 0$. Apply \eqref{prop:11.20} to $f_{s}$ and we deduce that $f_{s}$ has all its coefficients in $\mathfrak{m}$. Since $f_{s}$ has coefficients in $k$ this implies $f_{s} \equiv 0$, a contradiction. Hence $x_{1}, \ldots, x_{d}$ are algebraically independent over $k$.
\end{proof}

\section{Regular Local Rings}\index{Regular local ring}\textit{Regular local ring}
In algebraic geometry there is an important distinction between singular and non-singular points (see Exercise 1). The local rings of non-singular points have as their generalization (to the non-geometric case) what are called regular local rings: these are rings satisfying any of the (equivalent) conditions i)-iii) of the next theorem.

\begin{theorem}\label{thm:11.22}
Let $A$ be a Noetherian local ring of dimension $d, \mathfrak{m}$ its maximal ideal, $k=A / \mathfrak{m}$. Then the following are equivalent:
\begin{enumerate}[i)]
\item $G_{\mathfrak{m}}(A) \cong k\left[t_{1}, \ldots, t_{d}\right]$ where the $t_{i}$ are independent indeterminates;
\item $\operatorname{dim}_{k}\left(\mathfrak{m} / \mathfrak{m}^{2}\right)=d$;
\item $\mathfrak{m}$ can be generated by $d$ elements.
\end{enumerate}
\end{theorem}

\begin{proof}
\begin{enumerate}[i)]
\item $\Rightarrow$ ii) is clear.
\item $\Rightarrow$ iii) by \eqref{prop:2.8}: see the proof of \eqref{cor:11.15}.
\item $\Rightarrow$ i): let $\mathfrak{m}=\left(x_{1}, \ldots, x_{d}\right)$, then by \eqref{prop:11.20} the map $\alpha: k\left[x_{1}, \ldots, x_{d}\right] \rightarrow G_{\mathfrak{m}}(A)$ is an isomorphism of graded rings.
\end{enumerate}
\end{proof}

A regular local ring is necessarily an integral domain: this is a consequence of the following more general result.

\begin{lemma}\label{lem:11.23}
Let $A$ be a ring, $a$ an ideal of $A$ such that $\bigcap_{n} \mathfrak{a}^{n}=0$.

Suppose that $G_{a}(A)$ is an integral domain. Then $A$ is an integral domain.
\end{lemma}

\begin{proof}
Let $x, y$ be non-zero elements of $A$. Then since $\cap a^{n}=0$ there exist integers $r, s \geqslant 0$ such that $x \in \mathfrak{a}^{r}, x \notin \mathfrak{a}^{r+2}, y \in \mathfrak{a}^{s}, y \notin \mathfrak{a}^{s+1}$. Let $\bar{x}, \bar{y}$ denote the images of $x, y$ in $G_{r}(A), G_{s}(A)$ respectively. Then $\bar{x} \neq 0, \bar{y} \neq 0$, hence $\bar{x} \bar{y}=$ $\bar{x} \cdot \bar{y} \neq 0$, hence $x y \neq 0$.
\end{proof}

Hence by \eqref{prop:9.2} the regular local rings of dimension 1 are precisely the discrete valuation rings.

It can also be shown that if $A$ is a local ring and $G_{\mathfrak{m}}(A)$ is an integrally closed integral domain, then $A$ is integrally closed. It follows that a regular local ring is integrally closed; but there are integrally closed local domains of dimension $>1$ which are not regular.

\begin{proposition}\label{prop:11.24}
Let $A$ be a Noetherian local ring. Then $A$ is regular if and only if $\hat{A}$ is regular.
\end{proposition}

\begin{proof}
By \eqref{prop:10.16}, \eqref{thm:10.26} and \eqref{cor:11.19} we know that $\hat{A}$ is a Noetherian local ring of the same dimension as $A$ and with $\hat{m}$ as maximal ideal. Now use \eqref{prop:10.22} which asserts that $G_{\mathfrak{m}}(A) \cong G_{\hat{\mathfrak{m}}}(\hat{A})$ and the result follows.
\end{proof}

\begin{remark}
\begin{enumerate}[1.]
\item It follows from what we have said above that $\hat{A}$ is also an integral domain. Geometrically speaking this means that (locally)

\[
\text { non-singularity } \Rightarrow \text { analytic irreducibility }
\]

or that, at a non-singular point, there is only one analytic "branch".

\item If $A$ contains a field $k$ mapping isomorphically onto $A / \mathfrak{m}$ (the geometric case) then \eqref{thm:11.22} implies that $\hat{A}$ is a formal power series ring over $k$ in $d$ indeterminates. Thus the completions of local rings of non-singular points on $d$-dimensional varieties over $k$ are all isomorphic.
\end{enumerate}
\end{remark}

\begin{example}
Let $A=k\left[x_{1}, \ldots, x_{n}\right]$ ($k$ any field, $x_{i}$ independent indeterminates); let $\mathfrak{m}=\left(x_{1}, \ldots, x_{n}\right)$. Then $A_{\mathfrak{m}}$ (the local ring of affine space $k^{n}$ at the origin) is a regular local ring: for $G_{\mathfrak{m}}(A)$ is a polynomial ring in $n$ variables.
\end{example}

\section{Transcendental Dimension}
We shall conclude this brief treatment of dimension theory by showing how the dimension of local rings connects up with the dimension of varieties defined classically in terms of the function field.

Assume for simplicity that $k$ is an algebraically closed field and let $V$ be an irreducible affine variety over $k$. Thus the coordinate ring $A(V)$ is of the form

\[
A(V)=k\left[x_{1}, \ldots, x_{n}\right] / p
\]

where $\mathfrak{p}$ is a prime ideal. The field of fractions of the integral domain $A(V)$ is called the field of rational functions on $V$ and is denoted by $k(V)$. It is a finitelygenerated extension of $k$ and so has a finite transcendence degree over $k$-the maximum number of algebraically independent elements. This number is defined to be the dimension of $V$. Now recall that, by the \index{Hilbert Nullstellensatz}\textit{Hilbert Nullstellensatz}, the points of $V$ correspond bijectively with the maximal ideals of $A(V)$. If $P$ is a point with maximal ideal $\mathfrak{m}$ we shall call $\operatorname{dim} A(V)_{\mathfrak{m}}$ the local dimension of $V$ at $P$. We propose to prove

\begin{theorem}\label{thm:11.25}
For any irreducible variety $V$ over $k$ the local dimension of $V$ at any point is equal to $\operatorname{dim} V$.
\end{theorem}

\begin{remark}
We already know by \eqref{cor:11.21} that $\operatorname{dim} V \geqslant \operatorname{dim} A_{\mathfrak{m}}$ for all $\mathfrak{m}$. The problem is to prove the opposite inequality, and for this purpose the main lemma is:
\end{remark}

\begin{lemma}\label{lem:11.26}
Let $B \subseteq A$ be integral domains with $B$ integrally closed and $A$ integral over $B$. Let $\mathfrak{m}$ be a maximal ideal of $A$, and let $\mathfrak{n}=\mathfrak{m} \cap B$. Then $\mathfrak{n}$ is maximal and $\operatorname{dim} A_{\mathfrak{m}}=\operatorname{dim} B_{\mathfrak{n}}$.
\end{lemma}

\begin{proof}
This is an easy consequence of the results of Chapter 5. First $\mathfrak{n}$ is maximal by \eqref{cor:5.8}. Next if

\[
\mathfrak{m} \supset q_{1} \supset q_{2} \supset \ldots \supset q_{d}
\]

is a strict chain of primes in $A$, its intersection with $B$ is by \eqref{cor:5.9} a strict chain of primes

\[
\mathfrak{n} \supset \mathfrak{p}_{1} \supset \mathfrak{p}_{2} \supset \ldots \supset \mathfrak{p}_{d} \text {. }
\]

This proves $\operatorname{dim} B_{\mathfrak{n}} \geqslant \operatorname{dim} A_{\mathfrak{m}}$. Conversely given the strict chain (2) we can, by \eqref{thm:5.16}, lift this to a chain (1) (necessarily strict): thus $\operatorname{dim} A_{\mathfrak{m}} \geqslant \operatorname{dim} B_{\mathfrak{n}}$.
\end{proof}

We can now proceed to:

\begin{proof}[Proof of \eqref{thm:11.25}]
By the \index{Normalization lemma}\textit{Normalization Lemma} (Chapter 5, Exercise 16), we can find a polynomial ring $B=k\left[x_{1}, \ldots, x_{d}\right]$ contained in $A(V)$ such that $d=$ $\operatorname{dim} V$ and $A(V)$ is integral over $B$. Since $B$ is integrally closed (remark following \eqref{prop:5.12}) we can apply \eqref{lem:11.26} and this reduces our task to proving \eqref{thm:11.25} for the ring $B$, i.e. for affine space. But any point of affine space can be taken as the origin of coordinates and, as we have already seen, $k\left[x_{1}, \ldots, x_{d}\right]$ localized at the maximal ideal $\left(x_{1}, \ldots, x_{d}\right)$ is a local ring of dimension $d$.
\end{proof}

\begin{corollary}\label{cor:11.27}
For every maximal ideal $\mathfrak{m}$ of $A(V)$ we have

\[
\operatorname{dim} A(V)=\operatorname{dim} A(V)_{\mathbf{m}}
\]
\end{corollary}

\begin{proof}
By definition we have $\operatorname{dim} A(V)=\sup _{\mathfrak{m}} \operatorname{dim} A(V)_{\mathfrak{m}}$. But by \eqref{thm:11.25} all $A(V)_{m}$ have the same dimension.
\end{proof}

\section{Exercises}
\begin{enumerate}[1.]
\item Let $f \in k\left[x_{1}, \ldots, x_{n}\right]$ be an irreducible polynomial over an algebraically closed field $k$. A point $P$ on the variety $f(x)=0$ is non-singular $\Leftrightarrow$ not all the partial derivatives $\partial f / \partial x_{i}$ vanish at $P$. Let $A=k\left[x_{1}, \ldots, x_{n}\right] /(f)$, and let $\mathfrak{m}$ be the maximal ideal of $A$ corresponding to the point $P$. Prove that $P$ is non-singular $\Leftrightarrow A_{\mathfrak{m}}$ is a regular local ring.

[By \eqref{cor:11.18} we have $\operatorname{dim} A_{m}=n-1$. Now

\[
\mathfrak{m} / \mathfrak{m}^{2} \cong\left(x_{1}, \ldots, x_{n}\right) /\left(x_{1}, \ldots, x_{n}\right)^{2}+(f)
\]

and has dimension $n-1$ if and only if $f \notin\left(x_{1}, \ldots, x_{n}\right)^{2}$.]

\item In \eqref{cor:11.21} assume that $A$ is complete. Prove that the homomorphism $k\left[\left[t_{1}, \ldots, t_{d}\right]\right] \rightarrow A$ given by $t_{t} \mapsto x_{1}(1 \leqslant i \leqslant d)$ is injective and that $A$ is a finitely-generated module over $k\left[\left[t_{1}, \ldots, t_{d}\right]\right]$. [Use \eqref{prop:10.24}.]

\item Extend \eqref{thm:11.25} to non-algebraically-closed fields. [If $k$ is the algebraic closure of $k$, then $k\left[x_{1}, \ldots, x_{n}\right]$ is integral over $k\left[x_{1}, \ldots, x_{n}\right]$.]

\item An example of a Noetherian domain of infinite dimension (Nagata). Let $k$ be a field and let $A=k\left[x_{1}, x_{2}, \ldots, x_{n}, \ldots\right]$ be a polynomial ring over $k$ in a countably infinite set of indeterminates. Let $m_{1}, m_{2}, \ldots$ be an increasing sequence of positive integers such that $m_{1+1}-m_{i}>m_{i}-m_{i-1}$ for all $i>1$. Let $\mathfrak{p}_{i}=$ $\left(x_{m_{1}+1}, \ldots, x_{m_{t+1}}\right)$ and let $S$ be the complement in $A$ of the union of the ideals $\mathfrak{p}_{\mathfrak{t}}$. Each $\mathfrak{p}_{1}$ is a prime ideal and therefore the set $S$ is multiplicatively closed. The ring $S^{-1} A$ is Noetherian by Chapter 7, Exercise 9. Each $S^{-1} \mathfrak{p}_{1}$ has height equal to $m_{1+1}-m_{\mathrm{i}}$, hence $\operatorname{dim} S^{-1} A=\infty$.

\item Reformulate \eqref{thm:11.1} in terms of the Grothendieck group $K\left(A_{0}\right)$ (Chapter 7, Exercise 26).

\item Let $\boldsymbol{A}$ be a ring (not necessarily Noetherian). Prove that

\[
1+\operatorname{dim} A \leqslant \operatorname{dim} A[x] \leqslant 1+2 \operatorname{dim} A .
\]

[Let $f: A \rightarrow A[x]$ be the embedding and consider the fiber of $f^{*}:$ Spec $(A[x]) \rightarrow$ Spec $(A)$ over a prime ideal $p$ of $A$. This fiber can be identified with the spectrum of $k \otimes_{1} A[x] \cong k[x]$, where $k$ is the residue field at $\mathfrak{p}$ (Chapter 3, Exercise 21), and $\operatorname{dim} k[x]=1$. Now use Exercise 7(ii) of Chapter 4.]

\item Let $A$ be a Noetherian ring. Then

\[
\operatorname{dim} A[x]=1+\operatorname{dim} A,
\]

and hence, by induction on $n$,

\[
\operatorname{dim} A\left[x_{1}, \ldots, x_{n}\right]=n+\operatorname{dim} A .
\]

[Let $\mathfrak{p}$ be a prime ideal of height $m$ in $A$. Then there exist $a_{1}, \ldots, a_{m} \in \mathfrak{p}$ such that $\mathfrak{p}$ is a minimal prime ideal belonging to the ideal $\mathfrak{a}=\left(a_{1}, \ldots, a_{m}\right)$. By Exercise 7 of Chapter $4, \mathfrak{p}[x]$ is a minimal prime ideal of $\mathfrak{a}[x]$ and therefore height $\mathfrak{p}[x] \leqslant m$. On the other hand, a chain of prime ideals $p_{0} \subset \mathfrak{p}_{1} \subset \ldots \subset \mathfrak{p}_{m}=\mathfrak{p}$ gives rise to a chain $\mathfrak{p}_{0}[x] \subset \cdots \subset \mathfrak{p}_{m}[x]=\mathfrak{p}[x]$, hence height $\mathfrak{p}[x] \geqslant m$. Hence height $\mathfrak{p}[x]=$ height $\mathfrak{p}$. Now use the argument of Exercise 6.]
\end{enumerate}
